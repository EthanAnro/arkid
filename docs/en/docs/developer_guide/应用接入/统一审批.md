# Unified examination and approval

## Function introduction

Unified examination and approval consists of three parts:

- ** Approve action **
- ** Approve the request **
- ** Approval system **

### ArkID core (approval action, approval request, approval system plug-in base class):

1. Create ** Approve action **: Specify the API interface to be approved, and the ** Approval system ** API responsible for approving the API call

2. Monitor API calls: When an API call occurs, do the following:

    * If the API call does not create a corresponding ** Approve the request ** one, the API call is interrupted, and the creation ** Approve the request ** is sent to the corresponding approval system through ** CREATE_APPROVE_REQUEST ** the event.
    * If the API call has created the ** Approve the request ** corresponding:

        - The API call was aborted because it was ** Approval system ** ** Approve the request ** not handled.
        - This ** Approve the request ** is ** Approval system ** rejected and the API call is aborted
        - This ** Approve the request ** is ** Approval system ** granted and the API call continues.

3. Approval system plug-in base class
   
    * See the [ arkid.core.extension.approve_system.ApproveSystemExtension ](../../%20插件开发/%20插件分类/审批系统/) plug-in base class
    * Monitor ** CREATE_APPROVE_REQUEST ** events and define abstract functions ** create_approve_request **. The third-party plug-in system can implement this method and send the approval request to the third-party system for processing
    * Create two interfaces to handle the logic of approval request passing and rejection respectively:
    
        - Agree to ** Approve the request ** the interface

            - path：/approve_requests/{{request_id}}/pass/
            - method: PUT
            - Handler: pass _ approve _ request _ handler
            - Need to implement abstract method: pass _ approve _ request

        - Deny the ** Approve the request ** interface

            - path：/approve_requests/{{request_id}}/deny/'
            - method: PUT
            - Handler: deny _ approve _ request _ handler
            - Need to implement abstract method: deny _ approve _ request

4. ArkID System Default Approval System

The third-party approval system plug-in can refer to the logic of the built-in default approval system plug-in. For the default approval system, see [ extension_root.com_longgui_approve_system_arkid.ApproveSystemArkIDExtension ](../../../%20%20系统插件/com_longgui_approve_system_arkid/)

