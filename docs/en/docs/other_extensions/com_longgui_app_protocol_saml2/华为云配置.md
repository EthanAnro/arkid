# 华为云配置

## 华为云虚拟用户SSO

=== "准备工作"
    下载华为云公共平台metadata文件：https://auth.huaweicloud.com/authui/saml/metadata.xml

=== "创建身份提供商"
    登陆至华为云公共平台，进入【控制台】，找到统一身份认证服务，创建身份提供商<br/>
    [![Xq9k4K.md.png](https://s1.ax1x.com/2022/06/17/Xq9k4K.md.png)](https://imgtu.com/i/Xq9k4K)

=== "复制登录链接"
    创建完成后进入修改身份提供商页面，复制登录链接至剪贴板备用<br/>
    [![Xq9E9O.md.png](https://s1.ax1x.com/2022/06/17/Xq9E9O.md.png)](https://imgtu.com/i/Xq9E9O)

=== "创建应用"
    登录arkid平台，进入【应用管理】-> 【应用列表】, 点击【添加】按钮, 创建一个名为华为云虚拟用户SSO的应用，应用URL填入复制的链接<br/>
    [![Xq9FN6.md.png](https://s1.ax1x.com/2022/06/17/Xq9FN6.md.png)](https://imgtu.com/i/Xq9FN6)

=== "配置协议"
    在arkid中右侧操作栏点击【配置协议】按钮进入协议配置窗口，选择协议类型为 `<b>`Saml2SP_METADATA `</b>`，依次填入相关数据：<br/>
    sp metadata文件即为前面步骤下载的数据文件<br/>
    [![Xq9iAx.md.png](https://s1.ax1x.com/2022/06/17/Xq9iAx.md.png)](https://imgtu.com/i/Xq9iAx)

=== "获取IDP元数据文件"
    确认后再次点击【配置协议】按钮,复制IDP entity ID一项的链接下载IDP元数据文件备用<br/>
    [![Xq9CH1.md.png](https://s1.ax1x.com/2022/06/17/Xq9CH1.md.png)](https://imgtu.com/i/Xq9CH1)

=== "修改身份提供商"
    返回华为云公共平台，在修改身份提供商页面中上传刚刚下载的IDP metadata文件<br/>
    [![Xq9V3D.md.png](https://s1.ax1x.com/2022/06/17/Xq9V3D.md.png)](https://imgtu.com/i/Xq9V3D)

=== "跳转登录"
    进入arkid桌面,点击华为云应用，经过数次页面跳转后，成功进入华为云平台,显示登陆用户为FederationUser<br/>
    [![Xq9ejH.md.png](https://s1.ax1x.com/2022/06/17/Xq9ejH.md.png)](https://imgtu.com/i/Xq9ejH)
