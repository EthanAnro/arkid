from . import (
    group, 
    tenant, 
    app, 
    extension,
    maketplace,
    webhook, 
    external_idp, 
    authorization_server, 
    user,
    permission,
)

from openapi.routers import root_add_routers, Router, PageRouter

root_add_routers([
    Router(
        path=app.path,
        name=app.name,
        page=app.tag,
        icon='component',
    ),
    Router(
        path='user',
        name='用户管理',
        icon='user',
        children=[
            PageRouter(
                page=user,
                icon='list',
            ),
            PageRouter(
                page=group,
                icon='tree-table',
            ),
            PageRouter(
                page=permission,
                icon='list'
            )
        ]
    ),
    Router(
        path='source',
        name='连接身份源',
        icon='component',
        children=[
            PageRouter(
                page=external_idp,
                icon='wechat',
            ),
            PageRouter(
                page=authorization_server,
                icon='list',
            ),
        ]
    ),
    Router(
        path='developer',
        name='开发者资源',
        icon='developer',
        children=[
            PageRouter(
                page=webhook,
                icon='webhook',
            ),
        ]
    ),
    Router(
        path='extension',
        name='插件管理',
        icon='list',
        children=[
            PageRouter(
                page=extension,
                icon='list',
            ),
            PageRouter(
                page=maketplace,
                icon='list',
            ),
        ]
    ),
    Router(
        path='system',
        name='系统管理',
        icon='setting',
        children=[
            Router(
                path='extension',
                name='插件管理',
                icon='list',
                children=[
                    Router(
                        path='aliyun',
                        name='阿里云配置',
                        icon='aliyun',
                        children=[
                            Router(
                                path='config',
                                name='短信配置',
                                icon='config_sms',
                                page='config'
                            ),
                            Router(
                                path='send_sms',
                                name='发送短信',
                                icon='send_sms',
                                page='send_sms',
                            )
                        ]
                    )
                ]
            ),
        ]
    ),
])